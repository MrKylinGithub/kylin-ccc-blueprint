# 蓝图编辑器 - 功能说明

## 🎯 项目概述

这是一个功能完整的蓝图风格图形化节点编辑器，集成在 Cocos Creator 插件中。支持自定义节点管理、可视化蓝图编辑、多标签管理和 JSON 数据导入导出。

## ✨ 核心功能

### 1. 节点管理系统
- **创建自定义节点** - 定义节点名称、分类、输入输出参数
- **节点分类管理** - 按功能分组，便于查找和使用
- **拖拽创建** - 从节点库拖拽到画布创建节点实例
- **参数类型支持** - 字符串、数字、布尔值、对象、执行流

### 2. 蓝图编辑器
- **可视化画布** - 网格背景，支持节点自由摆放
- **节点连接** - 鼠标拖拽创建贝塞尔曲线连接
- **实时交互** - 节点选择、移动、删除
- **参数编辑** - 直接在节点上编辑参数值

### 3. 多标签管理
- **多蓝图同时编辑** - 支持创建多个蓝图标签页
- **未保存提示** - 自动检测并标记未保存的更改
- **标签页操作** - 创建、关闭、切换标签页

### 4. 数据导入导出
- **JSON 格式** - 完整的蓝图数据序列化
- **节点定义包含** - 导出时包含所有自定义节点定义
- **一键导入** - 支持粘贴 JSON 数据快速导入

## 🎮 使用方法

### 创建节点
1. 点击节点管理器中的"创建节点"按钮
2. 填写节点基本信息（名称、分类、描述）
3. 添加输入和输出参数，设置参数类型
4. 保存后节点会出现在对应分类中

### 编辑蓝图
1. 点击"新建蓝图"创建新的编辑区域
2. 从左侧拖拽节点到画布上
3. 点击输出端口拖拽到输入端口创建连接
4. 调整节点位置和参数值
5. 使用工具栏保存或导出蓝图

### 快捷操作
- `Delete/Backspace` - 删除选中的节点或连接
- 鼠标拖拽 - 移动节点位置
- 右键点击 - 显示上下文菜单（预留）

## 📋 数据格式

导出的 JSON 包含以下结构：

```json
{
  "blueprint": {
    "id": "blueprint_id",
    "name": "蓝图名称",
    "nodes": [...],      // 节点实例数组
    "connections": [...], // 连接关系数组
    "variables": {}      // 蓝图变量
  },
  "nodeDefinitions": [...] // 自定义节点定义
}
```

## 🔧 技术实现

- **Vue 3 + TypeScript** - 现代化前端框架
- **Element Plus** - 企业级 UI 组件库
- **响应式状态管理** - 基于 Vue 3 Reactive API
- **模块化架构** - 组件化设计，易于扩展
- **暗色主题** - 与 Cocos Creator 编辑器风格保持一致

## 🎨 界面设计

编辑器采用了与 Cocos Creator 一致的暗色主题：

- **主背景色** - 深灰色 (#2b2b2b)
- **面板背景** - 中灰色 (#3a3a3a)
- **元素背景** - 浅灰色 (#4a4a4a)
- **文字颜色** - 白色/浅灰色 (#ffffff/#cccccc)
- **边框分割** - 深灰色 (#555)
- **主题色** - 蓝色 (#409eff)

界面布局包括：
- **左侧节点管理器** - 可调整宽度，支持隐藏/显示，智能响应式适配
- **右侧编辑区域** - 多标签页设计，支持同时编辑多个蓝图
- **顶部工具栏** - 快速操作按钮和状态信息，支持自适应折叠
- **画布区域** - 网格背景，支持无限滚动，响应式缩放

## 📱 响应式设计

编辑器具备完善的响应式适配能力：

### 🖥️ 大屏幕 (>1200px)
- 节点管理器默认 300px 宽度
- 完整工具栏和状态信息显示
- 节点最小宽度 200px

### 💻 中等屏幕 (900px-1200px)  
- 节点管理器自动调整为窗口 30-60% 宽度
- 工具栏元素适当缩放
- 节点最小宽度 160px

### 📱 小屏幕 (<900px)
- 窗口小于 800px 时自动隐藏节点管理器
- 工具栏垂直布局，节省空间
- 节点最小宽度 140px
- 状态信息居中显示

### 🤏 超小屏幕 (<600px)
- 最小支持宽度 500px
- 版本号等次要信息自动隐藏
- 节点紧凑布局，最小宽度 120px
- 参数输入框自适应缩放

### 🔧 智能适配功能
- **动态宽度限制** - 节点管理器宽度自动限制在窗口的 20%-60%
- **自动隐藏/显示** - 小窗口时智能隐藏侧边栏
- **内容溢出处理** - 文字省略号和滚动条优雅处理
- **触摸友好** - 最小点击区域 44px，适合触屏操作

## 🚀 扩展开发

这个编辑器为后续的蓝图运行时开发提供了完整的数据基础：

1. **解析导出数据** - 读取节点定义和连接关系
2. **实现节点逻辑** - 根据节点类型实现具体功能
3. **执行引擎** - 按照连接关系执行节点逻辑
4. **调试支持** - 可视化执行过程和状态

## 📦 内置节点库

系统预装了丰富的内置节点，覆盖常见的编程需求：

### 🎯 事件节点
- **开始** - 蓝图执行的起始点 (绿色)
- **结束** - 蓝图执行的结束点 (红色)  
- **延时** - 延时执行，支持设置延时时间 (紫色)

### 🔀 控制流节点
- **条件判断** - 根据布尔条件选择执行路径 (深橙色)
- **循环** - 循环执行指定次数，输出索引和完成信号 (棕色)
- **开关** - 根据数值选择不同的执行分支 (蓝灰色)

### 🧮 数学运算节点
- **加法** - 两个数字相加 (蓝色)
- **减法** - 两个数字相减 (蓝色)
- **乘法** - 两个数字相乘 (蓝色)
- **除法** - 两个数字相除 (蓝色)
- **随机数** - 生成指定范围的随机数 (蓝色)
- **绝对值** - 获取数字的绝对值 (蓝色)

### 🔤 字符串操作节点
- **字符串拼接** - 将多个字符串连接 (浅绿色)
- **字符串长度** - 获取字符串长度 (浅绿色)
- **包含检查** - 检查字符串是否包含指定文本 (浅绿色)
- **字符串替换** - 替换字符串中的文本 (浅绿色)

### 🧠 逻辑运算节点
- **逻辑与** - AND 运算 (粉色)
- **逻辑或** - OR 运算 (粉色)
- **逻辑非** - NOT 运算 (粉色)

### ⚖️ 比较运算节点
- **等于** - 比较两个值是否相等 (橙色)
- **大于** - 比较A是否大于B (橙色)
- **小于** - 比较A是否小于B (橙色)

### 📊 变量操作节点
- **获取变量** - 从蓝图变量中获取值 (深紫色)
- **设置变量** - 设置蓝图变量的值 (深紫色)

### 🔄 类型转换节点
- **转字符串** - 将任意值转换为字符串 (青色)
- **转数字** - 将字符串转换为数字 (青色)
- **转布尔值** - 将任意值转换为布尔值 (青色)

### 🐛 调试节点
- **调试输出** - 输出调试信息到控制台 (橙色)
- **断点** - 设置断点，暂停执行 (红色)
- **监视** - 监视变量值的变化 (橙色)

总共提供了 **30+** 个内置节点，涵盖了基础编程的各个方面，为复杂的逻辑编排提供了强大的基础。 